# ETF Momentum JoinQuant
# 使用方法: python src/main.py backtest -c etf_momentum_joinquant_backtest.yaml

# ============================================================================
# 回测时间范围 (Time Range Configuration)
# ============================================================================
time_range:
  start: "2023-01-01"            # 开始日期 YYYY-MM-DD
  end: "202-12-31"              # 结束日期 YYYY-MM-DD

# ============================================================================
# 交易配置 (Trading Configuration)
# ============================================================================
trading:
  stake_amount: 100000          # 初始资金 (USD)
  max_open_trades: 1            # 最大持仓数
  timeframe: "1d"               # 时间框架: 日线
  dry_run: true                 # 模拟模式 (true=回测, false=实盘)

# ============================================================================
# 券商/经纪商配置 (Broker Configuration)
# ============================================================================
broker:
  name: "simulated"             # 券商类型: simulated(模拟), ib(Interactive Brokers)
  commission: 0.001             # 手续费率: 0.1% (1bps)
  slippage: 0.0005              # 滑点率: 0.05%

# ============================================================================
# 风控配置 (Risk Configuration)
# ============================================================================
risk:
  stoploss: -0.10               # 固定止损: -10%
  trailing_stop: false          # 是否启用追踪止损

# ============================================================================
# 数据配置 (Data Configuration)
# ============================================================================
data:
  datadir: "./data"             # 数据目录
  startup_candle_count: 200     # 启动所需K线数量 (63天用于波动率计算)
  universe:                     # ETF标的池
    - "QQQ"                     # Nasdaq 100
    - "SPY"                     # S&P 500
    - "IWM"                     # Russell 2000
    - "TLT"                     # 20年期国债
    - "GLD"                     # 黄金
    - "VTI"                     # 全美股票
    - "VEA"                     # 发达市场股票
    - "VWO"                     # 新兴市场股票
    - "DBC"                     # 大宗商品
    - "EEM"                     # 新兴市场 (备选)
  benchmark_symbol: "SPY"       # 基准指数

# ============================================================================
# 策略配置 (Strategy Configuration)
# ============================================================================
strategy:
  name: "etf_momentum_joinquant"    # 策略名称
  params:
    # 回溯参数
    lookback_days: 20              # 基础回溯天数 (计算动量的天数)
    lookback_volatility: 63        # 波动率计算回溯天数
    min_momentum_days: 10          # 最小动量计算天数

    # 过滤参数
    r2_threshold: 0.5              # R²最小阈值 (趋势稳定性过滤, 0.0-1.0)
    volatility_threshold: 0.4      # 波动率阈值 (高于此值应用惩罚)
    volatility_penalty: 0.5        # 高波动率惩罚系数

    # 持仓参数
    target_positions: 1            # 目标持仓数量
